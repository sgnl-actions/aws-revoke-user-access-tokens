# yaml-language-server: $schema=https://raw.githubusercontent.com/sgnl-actions/schemas/main/metadata.schema.json
name: aws-revoke-user-access-tokens
description: Revoke all AWS access tokens for a user by deleting all their access keys

# Input parameters for web form generation
inputs:
  userName:
    type: text
    description: The name of the IAM user whose access tokens should be revoked
    required: true
    validation:
      min: 1
      max: 64

  region:
    type: text
    description: AWS region (e.g., us-east-1)
    required: true
    validation:
      min: 1
      max: 30

# Expected output structure
outputs:
  userName:
    type: text
    description: The user whose access tokens were revoked

  keysDeleted:
    type: number
    description: Number of access keys that were deleted

  revoked:
    type: boolean
    description: Whether the revocation was successful

  revokedAt:
    type: datetime
    description: When the revocation completed (ISO 8601)

# Required secrets (configured at deployment time)
secrets:
  - AWS_ACCESS_KEY_ID
  - AWS_SECRET_ACCESS_KEY

# Runtime configuration
runtime:
  type: nodejs-22
  timeout: 30s
  memory: 128Mi